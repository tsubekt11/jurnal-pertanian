<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Jurnal Harian Pertanian</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body{
      font-family: Arial, Helvetica, sans-serif;
      margin:0;
      background:#f4f7f4;
    }
    header{
      background:#2f7d32;
      color:#fff;
      padding:14px;
      text-align:center;
    }
    .card{
      background:#fff;
      margin:12px;
      padding:12px;
      border-radius:10px;
      box-shadow:0 2px 6px rgba(0,0,0,.08);
    }
    input, textarea, button{
      width:100%;
      padding:8px;
      margin-top:4px;
      box-sizing:border-box;
    }
    button{
      background:#2f7d32;
      color:#fff;
      border:none;
      border-radius:6px;
      font-size:15px;
      margin-top:10px;
    }
  </style>
</head>

<body>
<header>
  <h2>ğŸŒ¾ Jurnal Harian Pertanian</h2>
  <p>Catatan kegiatan & perawatan lahan</p>
</header>

<div class="card">
  <b>ğŸ“Œ Data Awal Musim</b><br><br>

  <label>Tanggal Mulai Olah Lahan (Hari ke-1)</label>
  <input type="date" id="olahLahan">

  <label>Tanggal Tanam</label>
  <input type="date" id="tanggalTanam">

  <button onclick="simpanDataAwal()">Simpan Data Awal</button>
</div>

<div class="card">
  <b>ğŸ““ Catatan Kegiatan</b><br><br>

  <label>Tanggal Kegiatan</label>
  <input type="date" id="tanggal">

  <label>Kegiatan</label>
  <textarea id="kegiatan" rows="4"
    placeholder="Contoh: olah tanah, pemupukan, penyemprotan"></textarea>

  <button onclick="simpan()">ğŸ’¾ Simpan Catatan</button>
</div>

<div class="card" id="riwayat"></div>
  <div class="card">
  <b>ğŸ’° Catatan Biaya & Upah</b><br><br>

  <label>Tanggal</label>
  <input type="date" id="tanggalBiaya">

  <label>Jenis</label>
  <select id="jenisBiaya">
    <option value="Belanja">Belanja</option>
    <option value="Upah">Upah</option>
  </select>

  <label>Keterangan</label>
  <input type="text" id="keteranganBiaya"
         placeholder="Contoh: pupuk NPK, upah tanam">

  <label>Jumlah (Rp)</label>
  <input type="number" id="jumlahBiaya" placeholder="Contoh: 150000">

  <button onclick="simpanBiaya()">ğŸ’¾ Simpan Biaya</button>
</div>

<div class="card" id="riwayatBiaya"></div>
<div class="card" id="totalBiaya"></div>
// simpan biaya & upah
function simpanBiaya(){
  const tanggal = document.getElementById('tanggalBiaya').value;
  const jenis = document.getElementById('jenisBiaya').value;
  const ket = document.getElementById('keteranganBiaya').value;
  const jumlah = parseInt(document.getElementById('jumlahBiaya').value);

  if(!tanggal || !ket || !jumlah){
    alert("Lengkapi data biaya ğŸ™");
    return;
  }

  const dataBaru = { tanggal, jenis, ket, jumlah };

  let data = JSON.parse(localStorage.getItem('jurnal_biaya')) || [];
  data.push(dataBaru);

  localStorage.setItem('jurnal_biaya', JSON.stringify(data));
  tampilkanBiaya();

  alert("Biaya tersimpan Alhamdulillah ğŸ¤²");
}

// tampilkan biaya & total
function tampilkanBiaya(){
  const riwayat = document.getElementById('riwayatBiaya');
  const totalBox = document.getElementById('totalBiaya');
  let data = JSON.parse(localStorage.getItem('jurnal_biaya')) || [];

  data.sort((a, b) => new Date(a.tanggal) - new Date(b.tanggal));

  let total = 0;
  riwayat.innerHTML = "<h3>ğŸ“’ Riwayat Biaya</h3>";

  data.forEach(item => {
    total += item.jumlah;
    riwayat.innerHTML += `
      <div class="card">
        ğŸ“… ${item.tanggal}<br>
        ğŸ’¼ ${item.jenis}<br>
        ğŸ“ ${item.ket}<br>
        ğŸ’° Rp ${item.jumlah.toLocaleString()}
      </div>
    `;
  });

  totalBox.innerHTML = `
    <b>ğŸ“Š Total Modal Sementara</b><br>
    <h2>Rp ${total.toLocaleString()}</h2>
  `;
}

tampilkanBiaya();

<script>
// simpan data awal
function simpanDataAwal(){
  const olah = document.getElementById('olahLahan').value;
  const tanam = document.getElementById('tanggalTanam').value;

  if(!olah || !tanam){
    alert("Lengkapi tanggal olah lahan dan tanggal tanam ğŸ™");
    return;
  }

  localStorage.setItem('olah_lahan', olah);
  localStorage.setItem('tanggal_tanam', tanam);

  alert("Data awal tersimpan Alhamdulillah ğŸŒ±");
}

// hitung selisih hari
function hitungHari(tanggalAwal, tanggalAkhir){
  const t1 = new Date(tanggalAwal);
  const t2 = new Date(tanggalAkhir);
  return Math.floor((t2 - t1) / (1000 * 60 * 60 * 24)) + 1;
}

// simpan catatan
function simpan(){
  const tanggal = document.getElementById('tanggal').value;
  const kegiatan = document.getElementById('kegiatan').value;

  const olahLahan = localStorage.getItem('olah_lahan');
  const tanggalTanam = localStorage.getItem('tanggal_tanam');

  if(!olahLahan || !tanggalTanam){
    alert("Data awal belum disimpan ğŸ™");
    return;
  }

  const hariKe = hitungHari(olahLahan, tanggal);
  const hst = hitungHari(tanggalTanam, tanggal) - 1;

  const dataBaru = {
    tanggal,
    hariKe,
    hst,
    kegiatan
  };

  let data = JSON.parse(localStorage.getItem('jurnal_harian')) || [];
  data.push(dataBaru);

  localStorage.setItem('jurnal_harian', JSON.stringify(data));
  tampilkanData();

  alert("Catatan tersimpan Alhamdulillah ğŸ¤²");
}

// tampilkan riwayat terurut tanggal
function tampilkanData(){
  const riwayat = document.getElementById('riwayat');
  let data = JSON.parse(localStorage.getItem('jurnal_harian')) || [];

  data.sort((a, b) => new Date(a.tanggal) - new Date(b.tanggal));

  riwayat.innerHTML = "<h3>ğŸ“– Riwayat Catatan</h3>";

  data.forEach(item => {
    riwayat.innerHTML += `
      <div class="card">
        <b>Hari ke-${item.hariKe}</b><br>
        ğŸ“… ${item.tanggal}<br>
        ğŸŒ± HST: ${item.hst}<br>
        ğŸ“ ${item.kegiatan}
      </div>
    `;
  });
}

tampilkanData();
</script>

</body>
</html>
