<!DOCTYPE html><html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jurnal Harian Pertanian</title>
<style>
body{
  font-family:Arial, sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:10px;
}
.card{
  background:#fff;
  padding:12px;
  margin-bottom:12px;
  border-radius:8px;
  box-shadow:0 2px 5px rgba(0,0,0,0.1);
}
.row{
  display:flex;
  gap:8px;
  margin-top:6px;
}
button{
  margin-top:10px;
  padding:8px 12px;
  border:none;
  background:#2e7d32;
  color:#fff;
  border-radius:6px;
  font-size:14px;
}
input{
  padding:6px;
  font-size:14px;
}
.tgl-kanan{
  width:160px;
  text-align:right;
}
.tgl-info{
  flex:1;
  font-size:18px;
  font-weight:bold;
  align-self:center;
}
.nama{flex:1}
.qty{width:45px;text-align:center}
.harga{width:110px;text-align:right}
</style>
</head>
<body><div class="card">
<b>ðŸ“Œ Data Awal Musim</b>
<div class="row">
  <input type="date" id="olah" class="tgl-kanan" onchange="tampilHari()">
  <div class="tgl-info" id="infoOlah"></div>
</div>
<div class="row">
  <input type="date" id="tanam" class="tgl-kanan" onchange="tampilHari()">
  <div class="tgl-info" id="infoTanam"></div>
</div>
<button onclick="simpanAwal()">Simpan Data Awal</button>
</div><div class="card">
<b>ðŸ’° Catatan Biaya & Modal</b><br>
<b>Tanggal</b><br>
<input type="date" id="tglBiaya"><br>
<button onclick="tambahItem()">+ Tambah Item Belanja</button>
<div id="belanjaBox"></div>
<button onclick="simpanBelanja()">Simpan</button>
</div><div class="card">
<b>ðŸ“œ Riwayat</b>
<div id="riwayat"></div>
</div><script>
let itemsBelanja=[];

function formatHari(tgl){
  const d=new Date(tgl);
  return d.toLocaleDateString('id-ID',{weekday:'long',day:'2-digit',month:'long',year:'numeric'});
}

function tampilHari(){
  if(olah.value) infoOlah.innerText=formatHari(olah.value);
  if(tanam.value) infoTanam.innerText=formatHari(tanam.value);
}

function simpanAwal(){
  alert('Data awal musim tersimpan');
}

function tambahItem(){
  itemsBelanja.push({nama:'',qty:1,harga:0});
  renderBelanja();
}

function renderBelanja(){
  belanjaBox.innerHTML='<b>ðŸ§¾ Daftar Belanja</b>';
  let total=0;
  itemsBelanja.forEach((it,i)=>{
    const sub=it.qty*it.harga; total+=sub;
    belanjaBox.innerHTML+=`
    <div style="margin-top:10px">
      <b>${i+1}. ${it.nama||'Nama Barang'}</b>
      <div style="text-align:right">
        ${it.qty} x ${it.harga.toLocaleString()} = <b>${sub.toLocaleString()}</b>
      </div>
      <div class="row">
        <input class="nama" placeholder="Nama Barang" value="${it.nama}" onchange="itemsBelanja[${i}].nama=this.value">
        <input class="qty" type="number" value="${it.qty}" onchange="itemsBelanja[${i}].qty=this.value;renderBelanja()">
        <input class="harga" type="number" value="${it.harga}" onchange="itemsBelanja[${i}].harga=this.value;renderBelanja()">
      </div>
    </div>`;
  });
  belanjaBox.innerHTML+=`<hr><b>Grand Total: Rp ${total.toLocaleString()}</b>`;
}

function simpanBelanja(){
  const t=tglBiaya.value||'Tanpa tanggal';
  riwayat.innerHTML+=`<div>ðŸ“… ${t} | Hari ke-â€¦ | HST: Undefined</div>`;
  itemsBelanja=[];
  belanjaBox.innerHTML='';
}
</script></body>
</html>
