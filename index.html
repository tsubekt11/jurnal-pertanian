<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Jurnal Harian Pertanian</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body{
      font-family: Arial, Helvetica, sans-serif;
      margin:0;
      background:#f4f7f4;
    }
    header{
      background:#2f7d32;
      color:#fff;
      padding:14px;
      text-align:center;
    }
    .card{
      background:#fff;
      margin:12px;
      padding:12px;
      border-radius:10px;
      box-shadow:0 2px 6px rgba(0,0,0,.08);
    }
    button{
      padding:10px;
      border:none;
      border-radius:6px;
      background:#2f7d32;
      color:#fff;
      font-size:15px;
    }
    input, textarea{
      width:100%;
      padding:8px;
      box-sizing:border-box;
    }
  </style>
</head>

<body>
<header>
  <h2>ğŸŒ¾ Jurnal Harian Pertanian</h2>
  <p>Catatan kegiatan & perawatan lahan</p>
</header>

<div class="card">
  <b>ğŸ““ Catatan Hari Ini</b><br><br>

  <label>ğŸ“Œ Tanggal Tanam</label><br>
  <input type="date" id="tanggalTanam"><br><br>
  <button onclick="simpanTanggalTanam()">Simpan Tanggal Tanam</button><br><br>

  <label>ğŸ“… Tanggal Kegiatan</label><br>
  <input type="date" id="tanggal"><br><br>

  <label>ğŸ“ Kegiatan</label><br>
  <textarea id="kegiatan" rows="4"
    placeholder="Contoh: penyemprotan, pemupukan, penyiangan"></textarea><br><br>

  <button onclick="simpan()">ğŸ’¾ Simpan Catatan</button>
</div>

<div class="card" id="riwayat"></div>

<script>
// simpan tanggal tanam
function simpanTanggalTanam(){
  const t = document.getElementById('tanggalTanam').value;
  if(!t){
    alert("Silakan pilih tanggal tanam ğŸ™");
    return;
  }
  localStorage.setItem('tanggal_tanam', t);
  alert("Tanggal tanam tersimpan Alhamdulillah ğŸŒ±");
}

// hitung HST
function hitungHST(tanggalTanam, tanggalKegiatan){
  const t1 = new Date(tanggalTanam);
  const t2 = new Date(tanggalKegiatan);
  const selisih = t2 - t1;
  return Math.floor(selisih / (1000 * 60 * 60 * 24));
}

// simpan catatan
function simpan(){
  const tanggal = document.getElementById('tanggal').value;
  const kegiatan = document.getElementById('kegiatan').value;
  const tanggalTanam = localStorage.getItem('tanggal_tanam');

  if(!tanggalTanam){
    alert("Tanggal tanam belum disimpan ğŸ™");
    return;
  }

  const hst = hitungHST(tanggalTanam, tanggal);

  const dataBaru = {
    tanggal,
    hst,
    kegiatan
  };

  let data = JSON.parse(localStorage.getItem('jurnal_harian')) || [];
  data.push(dataBaru);
  localStorage.setItem('jurnal_harian', JSON.stringify(data));

  tampilkanData();
  alert("Catatan tersimpan Alhamdulillah ğŸ¤²");
}

// tampilkan riwayat
function tampilkanData(){
  const riwayat = document.getElementById('riwayat');
  const data = JSON.parse(localStorage.getItem('jurnal_harian')) || [];

  riwayat.innerHTML = "<h3>ğŸ“– Riwayat Catatan</h3>";

  data.forEach((item, i) => {
    riwayat.innerHTML += `
      <div class="card">
        <b>Hari ke-${i+1}</b><br>
        ğŸ“… ${item.tanggal}<br>
        ğŸŒ± HST: ${item.hst}<br>
        ğŸ“ ${item.kegiatan}
      </div>
    `;
  });
}

tampilkanData();
</script>

</body>
</html>
